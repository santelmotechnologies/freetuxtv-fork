# This file allow to build package with cpack

set(CPACK_CMAKE_BUILD_TYPE @CMAKE_BUILD_TYPE@)

if(CPACK_GENERATOR MATCHES "NSIS")
	SET(CPACK_PACKAGE_INSTALL_DIRECTORY "@APPLICATION_VENDOR_PACKAGE@\\@APPLICATION_PACKAGE_NAME@")
	SET(CPACK_NSIS_INSTALLED_ICON_NAME "@APPLICATION_PACKAGE_NAME@.exe")
	SET(CPACK_NSIS_DISPLAY_NAME "@APPLICATION_NAME@")
	SET(CPACK_NSIS_HELP_LINK "http://@APPLICATION_VENDOR_DOMAIN@")
	SET(CPACK_NSIS_URL_INFO_ABOUT "http://@APPLICATION_VENDOR_DOMAIN@")
	SET(CPACK_NSIS_CONTACT "@APPLICATION_CONTACTMAIL@")
	SET(CPACK_NSIS_EXECUTABLES_DIRECTORY ".")
	SET(CPACK_NSIS_MUI_FINISHPAGE_RUN "@APPLICATION_PACKAGE_NAME@.exe")
	SET(CPACK_NSIS_ENABLE_UNINSTALL_BEFORE_INSTALL ON)
	# Add desktop icon CPACK_CREATE_DESKTOP_LINKS won't work without CPACK_NSIS_MODIFY_PATH
	SET(CPACK_NSIS_EXTRA_INSTALL_COMMANDS "  CreateShortCut '\$DESKTOP\\\\@APPLICATION_NAME@.lnk' '\$INSTDIR\\\\@APPLICATION_PACKAGE_NAME@.exe'")
	SET(CPACK_NSIS_EXTRA_UNINSTALL_COMMANDS "  Delete '\$DESKTOP\\\\@APPLICATION_NAME@.lnk'")
endif(CPACK_GENERATOR MATCHES "NSIS")

if(CPACK_GENERATOR MATCHES "Bundle")
    SET(CPACK_BUNDLE_NAME "@APPLICATION_NAME@")
    SET(CPACK_BUNDLE_ICON "@PROJECT_SOURCE_DIR@/data/logos/@APPLICATION_PACKAGE_NAME@.icns")
    SET(CPACK_BUNDLE_PLIST "@PROJECT_BINARY_DIR@/platforms/osx/Info.plist")
    SET(CPACK_BUNDLE_STARTUP_COMMAND "@PROJECT_BINARY_DIR@/platforms/osx/@APPLICATION_NAME@")
    if(CPACK_CMAKE_BUILD_TYPE MATCHES Release)
        SET(CPACK_BUNDLE_APPLE_CERT_APP "Developer ID Application: Jet1oeil")
        SET(CPACK_APPLE_BUNDLE_ID "com.jet1oeil.tcv")
    endif()
endif()
